<!-- Main nav -->
<ng-container *ngIf="navigationTypes.Primary == activeNavigation">

  <mat-toolbar color="primary">
    <!-- Left -->
    <a mat-button
      routerLink="/">
      <img class="logo"
        src="assets/logo.svg"
        alt="logo">
    </a>
    <ng-container *ngTemplateOutlet="navLinks"></ng-container>

    <span class="spacer"></span>

    <!-- Right -->
    <a mat-button
      (click)="openPaymentDialog()">
      <mat-icon>credit_card</mat-icon>
      <span *ngIf="isWeb">&nbsp;Donate</span>
    </a>

    <a mat-button
      href="https://github.com/CharlBest/nean-stack-starter"
      target="_blank">
      <img src="assets/github-logo.svg"
        alt="github logo">
      <span *ngIf="isWeb">&nbsp;GitHub</span>
    </a>

    <!-- TODO: [appTutorial]="tutorialTypeEnum.ContextMenu" -->
    <button mat-icon-button
      *ngIf="isWeb"
      [matMenuTriggerFor]="menu">
      <mat-icon>more_vert</mat-icon>
    </button>
    <button mat-icon-button
      *ngIf="!isWeb"
      (click)="bottomSheet.open(bottomSheetContextMenu)">
      <mat-icon>more_vert</mat-icon>
    </button>
  </mat-toolbar>

  <!-- <mat-toolbar color="primary">
    <ng-container *ngTemplateOutlet="navLinks"></ng-container>
  </mat-toolbar> -->
</ng-container>

<mat-menu #menu="matMenu">
  <ng-container *ngTemplateOutlet="contextMenu; context: {$implicit: {}}"></ng-container>
</mat-menu>

<ng-template #bottomSheetContextMenu>
  <ng-container *ngTemplateOutlet="contextMenu; context: {$implicit: {}}"></ng-container>
</ng-template>

<!-- Back nav -->
<ng-container *ngIf="navigationTypes.Back == activeNavigation">

  <mat-toolbar class="back-toolbar">
    <button mat-icon-button
      (click)="back()">
      <mat-icon>arrow_back</mat-icon>
    </button>

    <span>{{navigationBackTitle}}</span>
  </mat-toolbar>

</ng-container>

<!-- Nav links -->
<ng-template #navLinks>
  <a mat-button
    routerLink="/">
    <mat-icon *ngIf="isWeb">home</mat-icon>
    <span>&nbsp;Home</span>
  </a>

  <a mat-button
    *ngIf="!loggedInUserId"
    routerLink="/login">
    <mat-icon *ngIf="isWeb">lock</mat-icon>
    <span>&nbsp;Login</span>
  </a>

  <a mat-button
    *ngIf="loggedInUserId"
    routerLink="/profile">
    <mat-icon *ngIf="isWeb">account_circle</mat-icon>
    <span>&nbsp;Profile</span>
  </a>
</ng-template>

<!-- Context menu links -->
<ng-template #contextMenu
  let-data>
  <mat-nav-list>

    <mat-list-item routerLink="/settings">
      <span mat-line>Settings</span>
      <mat-icon mat-list-icon>settings</mat-icon>
    </mat-list-item>
    <mat-list-item routerLink="/feedback">
      <mat-icon mat-list-icon>feedback</mat-icon>
      <span mat-line>Feedback</span>
    </mat-list-item>
    <mat-list-item routerLink="/newsletter">
      <mat-icon mat-list-icon>mail</mat-icon>
      <span mat-line>Newsletter</span>
    </mat-list-item>
    <mat-list-item routerLink="/legal/help">
      <mat-icon mat-list-icon>help</mat-icon>
      <span mat-line>Help</span>
    </mat-list-item>
    <mat-list-item (click)="takeTour()">
      <mat-icon mat-list-icon>live_help</mat-icon>
      <span mat-line>Take tour</span>
    </mat-list-item>
    <mat-list-item *ngIf="loggedInUserId"
      (click)="logout()">
      <mat-icon mat-list-icon>exit_to_app</mat-icon>
      <span mat-line>Logout</span>
    </mat-list-item>

  </mat-nav-list>
</ng-template>