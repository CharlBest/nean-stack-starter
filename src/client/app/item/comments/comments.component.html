<ng-container *ngIf="!isProcessing && item">
    <app-item [item]="item"
        [isViewingComments]="true"></app-item>

    <form [formGroup]="formGroup"
        *ngIf="isAuthenticated">
        <mat-card>
            <mat-card-content>
                <h3>Comments</h3>
                <mat-form-field>
                    <mat-label>type comment here...</mat-label>
                    <textarea matInput
                        formControlName="description"
                        cdkTextareaAutosize
                        cdkAutosizeMinRows="1"
                        cdkAutosizeMaxRows="8"
                        (blur)="showCommentSubmitButton = false"
                        (focus)="showCommentSubmitButton = true"></textarea>
                    <mat-error>
                        <app-form-errors [control]="formGroup.get('description')"></app-form-errors>
                    </mat-error>
                </mat-form-field>
            </mat-card-content>
            <mat-card-actions>
                <button mat-raised-button
                    type="submit"
                    *ngIf="showCommentSubmitButton || (formGroup.get('description').value && formGroup.get('description').value !== '')"
                    [disabled]="!formGroup.valid"
                    (click)="createComment()">Comment</button>
            </mat-card-actions>
        </mat-card>
    </form>
</ng-container>

<mat-card *ngIf="comments && comments.length > 0">
    <mat-card-content *ngFor="let comment of comments">{{comment.description}}</mat-card-content>
</mat-card>

<ng-container *ngIf="!isProcessing && !item">
    <mat-card>
        Item does not exist
    </mat-card>
</ng-container>

<mat-spinner *ngIf="isProcessing || isProcessingComment"></mat-spinner>