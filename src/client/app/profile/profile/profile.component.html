<div [hidden]="isProcessing"
  *ngIf="user !== null">
  <mat-card>
    <mat-card-title>{{user.username}}</mat-card-title>
    <mat-card-subtitle>{{user.email}}</mat-card-subtitle>
    <mat-card-content>
      <div>Email verified:
        <mat-icon *ngIf="user.emailVerified"
          class="email-verified">done</mat-icon>
        <mat-icon *ngIf="!user.emailVerified"
          class="email-not-verified">close</mat-icon>
      </div>
      <div>Sign-up date: {{user.dateCreated | date}}</div>
      <!-- <div>Profile views: {{user.views}}</div> -->
    </mat-card-content>
    <mat-card-actions class="profile-actions">
      <button mat-raised-button
        type="button"
        (click)="openShareDialog()"
        [appTutorial]="tutorialTypeEnum.ProfileShare">Share</button>
      <button mat-raised-button
        type="button"
        (click)="openReportDialog()"
        [appTutorial]="tutorialTypeEnum.ProfileReport">Report</button>
      <button mat-raised-button
        type="button"
        (click)="resendEmailVerificationLink()"
        *ngIf="!user.emailVerified">Resend email verification link</button>
      <button mat-raised-button
        type="button"
        (click)="profileTour()">Profile tour</button>
      <button mat-raised-button
        color="warn"
        type="button"
        (click)="openDeleteAccountDialog()"
        [appTutorial]="tutorialTypeEnum.DeleteUser">Delete account</button>
    </mat-card-actions>
  </mat-card>

  <mat-card [appTutorial]="tutorialTypeEnum.AvatarUpload">
    <mat-card-title>Avatar</mat-card-title>
    <mat-card-content>
      <app-media [src]="user.avatarUrl"
        *ngIf="user.avatarUrl"
        mat-card-image></app-media>
    </mat-card-content>
    <mat-card-actions>
      <app-upload-button (onUploadComplete)="updateAvatar($event)"
        [folderName]="'avatars'"></app-upload-button>
      <button mat-raised-button
        color="warn"
        type="button"
        (click)="removeAvatar()"
        *ngIf="user?.avatarUrl?.length > 0">Remove avatar</button>
    </mat-card-actions>
  </mat-card>

  <app-update-bio [content]="user.bio"></app-update-bio>

  <app-update-password></app-update-password>

  <app-payments></app-payments>
</div>

<mat-card [hidden]="isProcessing"
  *ngIf="user === null">
  <mat-card-content>
    An error occurred
  </mat-card-content>
</mat-card>

<mat-card *ngIf="isProcessing">
  <mat-spinner></mat-spinner>
</mat-card>